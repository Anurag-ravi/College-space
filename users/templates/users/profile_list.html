{% extends "main/basic.html" %}
{% block content %}
{% load crispy_forms_tags %}
{% if is_empty %}
    <h1>No Profiles to show</h1>
{% endif %}
<div class="overflow-auto container" style="height: 90vh;">
{% for item in object_list %}
    <div class="container border rounded-3 my-2 col-8 bg-white">
        <div class="row py-2">
            <div class="col-3">
                <img src="{{item.avatar.url}}" class="rounded-circle z-depth-2" alt="{{item.name}}" style="width:100%;height:100%;">
            </div>
            <div class="col-6">
                <h3>{{item.name}}</h3>
                <p>{{item.department}}</p>
                <button class="btn btn-primary">See Profile</button>
            </div>
            <div class="col-3">
                {% if item.user not in rel_receiver and item.user not in rel_sender %}
                    <form action="{% url 'send-invites'%}" method="POST">
                        {%csrf_token%}
                        <input type="hidden" name="profile_pk" value="{{item.pk}}">
                        <button class="btn btn-success" type="submit">Add Friend</button>
                    </form>
                {% endif %}
                {% if item.user in rel_receiver and request.user not in item.friends.all %}
                    <button class="btn btn-secondary" type="submit" disabled>Request Sent</button>
                {% endif %}
                {% if request.user in item.friends.all %}
                    <form action="{% url 'remove-friend'%}" method="POST">
                        {%csrf_token%}
                        <input type="hidden" name="profile_pk" value="{{item.pk}}">
                        <button class="btn btn-danger" type="submit">Remove Friend</button>
                    </form>
                {% endif %}
            </div>
        </div>
    </div>
{% endfor %}
</div>
{% endblock content %}